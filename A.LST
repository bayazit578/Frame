Turbo Assembler	 Version 4.1	    02/12/26 02:00:28	    Page 1
a.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5	      =0029		     COLUMN  equ 29h
      6	      =0050		     STRING  equ 50h
      7	      =B800		     VRAMSEG equ 0b800h
      8
      9	0100			     start:
     10	0100  B8 B800			 mov   ax, VRAMSEG			     ;video segment
     11	0103  8E C0			 mov   es, ax
     12
     13	0105  E8 0023			 call  half_column			     ;half column -> bx
     14
     15	0108  E8 0026			 call  half_string			     ;half str -> cx
     16	010B  E8 0029			 call  half_cmd_string			     ;half cmd str -> dx
     17	010E  2B CA			 sub   cx, dx
     18
     19	0110  E8 0030			 call  calc_adress			     ;adress arithmetics -> di
     20
     21	0113  E8 0027			 call  get_cmd_length			     ;length ->	dl
     22
     23	0116  33 C9			 xor   cx, cx
     24	0118  8A CA			 mov   cl, dl
     25	011A  BE 0082			 mov   si, 82h
     26	011D  B4 C0			 mov   ah, 0c0h
     27
     28	011F  E3 05			 jcxz  end_loop
     29	0121  4A			 dec   dx
     30	0122			     copy_loop:
     31	0122  AC			 lodsb
     32	0123  AB			 stosw
     33	0124  E2 FC			 loop  copy_loop
     34	0126			     end_loop:
     35
     36	0126  B8 4C00			 mov   ax, 4c00h
     37	0129  CD 21			 int   21h
     38
     39	012B			     half_column:
     40	012B  BB 0029			 mov   bx, COLUMN
     41	012E  D1 EB			 shr   bx, 1
     42	0130  C3			 ret
     43
     44	0131			     half_string:
     45	0131  B9 0050			 mov   cx, STRING
     46	0134  D1 E9			 shr   cx, 1
     47	0136  C3			 ret
     48
     49	0137			     half_cmd_string:
     50	0137  E8 0003			 call  get_cmd_length
     51	013A  D1 EA			 shr   dx, 1
     52	013C  C3			 ret
     53
     54	013D			     get_cmd_length:
     55	013D  BE 0080			 mov   si, 80h
     56	0140  8A 14			 mov   dl, byte	ptr ds:[si]
     57	0142  C3			 ret
Turbo Assembler	 Version 4.1	    02/12/26 02:00:28	    Page 2
a.asm



     58
     59	0143			     calc_adress:
     60	0143  B8 0050			 mov   ax, STRING
     61	0146  F6 E3			 mul   bl
     62	0148  03 C1			 add   ax, cx
     63	014A  D1 E0			 shl   ax, 1
     64	014C  8B F8			 mov   di, ax
     65	014E  C3			 ret
     66
     67				     end start
Turbo Assembler	 Version 4.1	    02/12/26 02:00:28	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/12/26"
??FILENAME			  Text	 "a	  "
??TIME				  Text	 "02:00:28"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 A
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
CALC_ADRESS			  Near	 DGROUP:0143
COLUMN				  Number 0029
COPY_LOOP			  Near	 DGROUP:0122
END_LOOP			  Near	 DGROUP:0126
GET_CMD_LENGTH			  Near	 DGROUP:013D
HALF_CMD_STRING			  Near	 DGROUP:0137
HALF_COLUMN			  Near	 DGROUP:012B
HALF_STRING			  Near	 DGROUP:0131
START				  Near	 DGROUP:0100
STRING				  Number 0050
VRAMSEG				  Number B800

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  014F Word	  Public  CODE
