Turbo Assembler	 Version 4.1	    02/12/26 15:41:25	    Page 1
a.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5	      =0024		     COLUMN  equ 24h
      6	      =0050		     STRING  equ 50h
      7	      =B800		     VRAMSEG equ 0b800h
      8
      9	0100			     start:
     10	0100  B8 B800				 mov   ax, VRAMSEG			     ;video segment
     11	0103  8E C0				 mov   es, ax
     12
     13	0105  E8 001C				 call  half_column			     ;half column -> bx
     14
     15	0108  E8 001F				 call  half_string			     ;half str -> dx
     16	010B  E8 0022				 call  half_cmd_string			     ;half cmd str -> cx
     17	010E  2B D1				 sub   dx, cx
     18
     19	0110  E8 002F				 call  calc_adress			     ;adress arithmetics -> di
     20
     21	0113  E8 0020				 call  get_cmd_length			     ;length ->	cx
     22
     23	0116  BE 0082				 mov   si, 82h
     24	0119  B4 C0				 mov   ah, 0c0h
     25
     26	011B			     copy_loop:
     27	011B  AC				 lodsb
     28	011C  AB				 stosw
     29	011D  E2 FC				 loop  copy_loop
     30
     31	011F			     end_loop:
     32	011F  B8 4C00				 mov   ax, 4c00h
     33	0122  CD 21				 int   21h
     34
     35	0124			     half_column:
     36	0124  BB 0024				 mov   bx, COLUMN
     37	0127  D1 EB				 shr   bx, 1
     38	0129  C3				 ret
     39
     40	012A			     half_string:
     41	012A  BA 0050				 mov   dx, STRING
     42	012D  D1 EA				 shr   dx, 1
     43	012F  C3				 ret
     44
     45	0130			     half_cmd_string:
     46	0130  E8 0003				 call  get_cmd_length
     47	0133  D1 E9				 shr   cx, 1
     48	0135  C3				 ret
     49
     50	0136			     get_cmd_length:
     51	0136  BE 0080				 mov   si, 80h
     52	0139  8A 0C				 mov   cl, byte	ptr ds:[si]
     53	013B  E3 E2				 jcxz  end_loop
     54	013D  FE C9				 dec   cl
     55	013F  32 ED				 xor   ch, ch
     56	0141  C3				 ret
     57
Turbo Assembler	 Version 4.1	    02/12/26 15:41:25	    Page 2
a.asm



     58	0142			     calc_adress:
     59	0142  B8 0050				 mov   ax, STRING
     60						 ;mul	bl
     61	0145  03 C2				 add   ax, dx
     62	0147  D1 E0				 shl   ax, 1
     63	0149  8B F8				 mov   di, ax
     64	014B  C3				 ret
     65
     66				     end start
Turbo Assembler	 Version 4.1	    02/12/26 15:41:25	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/12/26"
??FILENAME			  Text	 "a	  "
??TIME				  Text	 "15:41:25"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 A
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
CALC_ADRESS			  Near	 DGROUP:0142
COLUMN				  Number 0024
COPY_LOOP			  Near	 DGROUP:011B
END_LOOP			  Near	 DGROUP:011F
GET_CMD_LENGTH			  Near	 DGROUP:0136
HALF_CMD_STRING			  Near	 DGROUP:0130
HALF_COLUMN			  Near	 DGROUP:0124
HALF_STRING			  Near	 DGROUP:012A
START				  Near	 DGROUP:0100
STRING				  Number 0050
VRAMSEG				  Number B800

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  014C Word	  Public  CODE
